# (opensloth) âœ  opensloth git:(dev/improve-usage) âœ— code train.sh
# (opensloth) âœ  opensloth git:(dev/improve-usage) âœ— os os train data/grpo_final_test --method grpo --gpus 0,1 -m ./hf-models/unsloth/Qwen3-0.6B-bnb-4bit --yes --use-tmux --grpo-max-tokens 2048 --help
# Usage: os [OPTIONS] COMMAND [ARGS]...
# Try 'os --help' for help.
# â•­â”€ Error â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
# â”‚ No such command 'os'.                                                                                                                                                                                                                                                                                                                                          â”‚
# â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
# (opensloth) âœ  opensloth git:(dev/improve-usage) âœ—  train data/grpo_final_test --method grpo --gpus 0,1 -m ./hf-models/unsloth/Qwen3-0.6B-bnb-4bit --yes --use-tmux --grpo-max-tokens 2048 
# (opensloth) âœ  opensloth git:(dev/improve-usage) âœ— os train data/grpo_final_test --method grpo --gpus 0,1 -m ./hf-models/unsloth/Qwen3-0.6B-bnb-4bit --yes --use-tmux --grpo-max-tokens 2048 --help
                                                                                                                                                                                                                                                                                                                                                                  
#  Usage: os train [OPTIONS] DATASET                                                                                                                                                                                                                                                                                                                                
                                                                                                                                                                                                                                                                                                                                                                  
#  ğŸš€ Train a model with pre-processed dataset                                                                                                                                                                                                                                                                                                                      
                                                                                                                                                                                                                                                                                                                                                                  
#  **Examples:**                                                                                                                                                                                                                                                                                                                                                    
                                                                                                                                                                                                                                                                                                                                                                  
#  â€¢ **Basic training:**                                                                                                                                                                                                                                                                                                                                            
#    os train data/my_dataset                                                                                                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                                                                                                                                  
#  â€¢ **Multi-GPU:**                                                                                                                                                                                                                                                                                                                                                 
#    os train data/my_dataset --gpus 0,1,2,3                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                  
#  â€¢ **Quick test:**                                                                                                                                                                                                                                                                                                                                                
#    os train data/my_dataset --preset quick                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                                                  
#  â€¢ **Custom settings:**                                                                                                                                                                                                                                                                                                                                           
#    os train data/my_dataset --model unsloth/Qwen2.5-7B-Instruct --epochs 5 --batch-size 2                                                                                                                                                                                                                                                                         
                                                                                                                                                                                                                                                                                                                                                                  
#  **ğŸ’¡ Tips:**                                                                                                                                                                                                                                                                                                                                                     
#  â€¢ Model auto-detected from dataset if not specified                                                                                                                                                                                                                                                                                                              
#  â€¢ Use `os list-presets` to see available presets                                                                                                                                                                                                                                                                                                                 
#  â€¢ Use `--dry-run` to preview configuration                                                                                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                                                                                                                                  
# â•­â”€ Arguments â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
# â”‚ *    dataset      TEXT  ğŸ“Š Path to processed dataset directory [default: None] [required]                                                                                                                                                                                                                                                                      â”‚
# â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
# â•­â”€ Options â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
# â”‚ --method           -M                         TEXT     ğŸ¯ Training method: sft | dpo | grpo [default: sft]                                                                                                                                                                                                                                                     â”‚
# â”‚ --model            -m                         TEXT     ğŸ¤– Model (auto-detect from dataset if not specified) [default: None]                                                                                                                                                                                                                                    â”‚
# â”‚ --output           -o                         TEXT     ğŸ’¾ Output directory [default: None]                                                                                                                                                                                                                                                                     â”‚
# â”‚ --gpus             -g                         TEXT     ğŸ”§ GPU indices (e.g. '0' or '0,1,2,3') [default: 0]                                                                                                                                                                                                                                                     â”‚
# â”‚ --epochs                                      INTEGER  ğŸ”„ Number of epochs [default: None]                                                                                                                                                                                                                                                                     â”‚
# â”‚ --max-steps                                   INTEGER  â° Max training steps [default: None]                                                                                                                                                                                                                                                                   â”‚
# â”‚ --batch-size                                  INTEGER  ğŸ“¦ Batch size per GPU [default: None]                                                                                                                                                                                                                                                                   â”‚
# â”‚ --lr                                          FLOAT    ğŸ“š Learning rate [default: None]                                                                                                                                                                                                                                                                        â”‚
# â”‚ --max-seq-length                              INTEGER  ğŸ“ Max sequence length [default: None]                                                                                                                                                                                                                                                                  â”‚
# â”‚ --4bit                 --no-4bit                       ğŸ”¢ 4-bit quantization [default: 4bit]                                                                                                                                                                                                                                                                   â”‚
# â”‚ --full-finetune                                        ğŸ¯ Full parameter training                                                                                                                                                                                                                                                                              â”‚
# â”‚ --lora-r                                      INTEGER  ğŸ¯ LoRA rank [default: None]                                                                                                                                                                                                                                                                            â”‚
# â”‚ --lora-alpha                                  INTEGER  ğŸ¯ LoRA alpha [default: None]                                                                                                                                                                                                                                                                           â”‚
# â”‚ --grpo-task-type                              TEXT     ğŸ¯ GRPO task type: math | code | general | reasoning [default: None]                                                                                                                                                                                                                                    â”‚
# â”‚ --grpo-group-size                             INTEGER  ğŸ‘¥ Number of responses per prompt [default: None]                                                                                                                                                                                                                                                       â”‚
# â”‚ --grpo-temp                                   FLOAT    ğŸŒ¡ï¸ GRPO sampling temperature [default: None]                                                                                                                                                                                                                                                             â”‚
# â”‚ --grpo-max-tokens                             INTEGER  ğŸ“ Max new tokens for GRPO generation [default: None]                                                                                                                                                                                                                                                   â”‚
# â”‚ --grpo-rewards                                TEXT     ğŸ† Comma-separated reward function names [default: None]                                                                                                                                                                                                                                                â”‚
# â”‚ --preset                                      TEXT     âš™ï¸ Use preset configuration [default: None]                                                                                                                                                                                                                                                              â”‚
# â”‚ --dry-run                                              ğŸ‘€ Show config without training                                                                                                                                                                                                                                                                         â”‚
# â”‚ --yes              -y                                  âœ… Skip confirmations                                                                                                                                                                                                                                                                                   â”‚
# â”‚ --use-tmux             --no-tmux                       ğŸ–¥ï¸ Launch multi-GPU training in a tmux session (one window per GPU) [default: no-tmux]                                                                                                                                                                                                                   â”‚
# â”‚ --tmux-session                                TEXT     ğŸ“› tmux session name (default: os_train_<timestamp>) [default: None]                                                                                                                                                                                                                                    â”‚
# â”‚ --tmux-auto-kill       --no-tmux-auto-kill             â˜ ï¸ Auto-kill existing session if present [default: no-tmux-auto-kill]                                                                                                                                                                                                                                    â”‚
# â”‚ --help                                                 Show this message and exit.                                                                                                                                                                                                                                                                             â”‚
# â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

# (opensloth) âœ  opensloth git:(dev/improve-usage) âœ— 
os prepare-data --method grpo --dataset "open-r1/DAPO-Math-17k-Processed" --split "en" --samples 10000 --model "unsloth/Qwen2.5-7B-Instruct" --output data/grpo_final_test --yes  -f

os train data/grpo_final_test --method grpo --gpus 0,1,2,3 -m hf-models/unsloth/Qwen3-4B-Base-bnb-4bit/ --yes --use-tmux --grpo-max-tokens 2048 --grpo-group-size 8 --batch-size 8 --task math